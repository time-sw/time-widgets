<div style="display:flex; justify-content:center; margin-top:20px;">
  <div id="x-widget"
       style="font-family:Arial,sans-serif; background:#111; color:#fff; padding:15px; border-radius:10px; width:408px;">
    <h2 style="margin-top:0; margin-bottom:12px; color:#1DA1F2; text-align:center;">Twitter Posts</h2>
    <ul id="x-posts" style="padding-left:0; list-style:none; margin:0;"></ul>
  </div>
</div>

<script>
async function fetchTweets() {
  try {
    const res = await fetch("/api/twitter");
    const data = await res.json();

    const list = document.getElementById("x-posts");
    list.innerHTML = "";

    if (!data.data) {
      list.innerHTML = "<li>⚠️ No posts available.</li>";
      return;
    }

    data.data.forEach(t => {
      const li = document.createElement("li");
      li.style.marginBottom = "12px";
      li.style.padding = "10px";
      li.style.border = "1px solid #333";
      li.style.borderRadius = "8px";
      li.style.background = "#222";

      const text = document.createElement("p");
      text.textContent = t.text;
      text.style.margin = "0 0 6px";

      const date = document.createElement("small");
      date.textContent = new Date(t.created_at).toLocaleString();
      date.style.color = "#aaa";

      li.appendChild(text);
      li.appendChild(date);
      list.appendChild(li);
    });
  } catch (err) {
    console.error(err);
    document.getElementById("x-posts").innerHTML = "<li>⚠️ Error loading posts.</li>";
  }
}

fetchTweets();
</script>
